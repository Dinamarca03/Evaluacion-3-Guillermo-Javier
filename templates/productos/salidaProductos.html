{% extends "sistema/base.html" %}

{% block title %}
Salida Productos
{% endblock %}

{% block contenido %}
<div class="container card mt-5 text-center">
    <h1 class="text-center display-3 mb-5">Historial de salida de Productos</h1>

    {% if salidas %}
    <div class="table-responsive bg-light mb-3">
        <table id="example" class="table table-bordered table-striped" style="width:100%">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Nombre</th>
                    <th>ID producto</th>
                    <th>Tipo de producto</th>
                    <th>Stock actual</th> <!-- Stock -->
                    <th>Fecha</th>
                    <th>Hora</th>
                    <th>Cantidad comprada</th>  <!-- Nuevo campo -->
                </tr>
            </thead>
            <tbody>
                {% for salida in salidas %}
                <tr>
                    <td>{{ salida.id }}</td>
                    <td>{{ salida.nombre }}</td>
                    <td>{{ salida.id_producto }}</td>
                    <td>{{ salida.tipo_producto }}</td>
                    <td>{{ salida.cantidad }}</td>
                    <td>{{ salida.fecha }}</td>
                    <td>{{ salida.hora }}</td>
                    <td>{{ salida.cantidad_comprada }}</td>  <!-- Nuevo campo -->
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    {% if user.is_authenticated and user.rol.rol != 'US' %}
        
    <div class="text-center mt-4">
        <a href="{% url 'generar_reporte' %}" class="btn btn-primary">Generar Reporte</a>
    </div>
    {% endif %} 

    {% else %}
    <p>No hay salidas de productos registradas.</p>
    {% endif %}
</div>
{% endblock %}
